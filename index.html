<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport"
content="width=device-width, initial-scale=1.0, viewport-fit=cover">

<title>WG Archer Run</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
:root{
Â  Â  --bg:#0b1224;
Â  Â  --panel:#0f172a;
Â  Â  --accent:#22c55e;
}

html,body{
Â  Â  margin:0;
Â  Â  padding:0;
Â  Â  height:100%;
Â  Â  background:var(--bg);
Â  Â  overflow:hidden;
Â  Â  font-family:Arial, sans-serif;
Â  Â  color:white;
}

.wrapper{
Â  Â  height:100vh;
Â  Â  display:flex;
Â  Â  flex-direction:column;
}

header{
Â  Â  padding:12px;
Â  Â  font-weight:900;
Â  Â  font-size:20px;
Â  Â  text-align:center;
}

#gameBox{
Â  Â  flex:1;
Â  Â  position:relative;
Â  Â  overflow:hidden;
}

canvas{
Â  Â  width:100%;
Â  Â  height:100%;
Â  Â  display:block;
}

.controls{
Â  Â  padding:12px;
Â  Â  background:var(--panel);
Â  Â  display:flex;
Â  Â  justify-content:space-between;
}

button{
Â  Â  padding:10px 18px;
Â  Â  border-radius:10px;
Â  Â  border:none;
Â  Â  background:var(--accent);
Â  Â  font-weight:bold;
}
</style>
</head>
<body>

<div class="wrapper">

<header>ğŸ¹ WG Archer Run</header>

<div id="gameBox">
Â  Â  <canvas id="game"></canvas>
</div>

<div class="controls">
Â  Â  <button onclick="startGame()">Ğ˜Ğ³Ñ€Ğ°Ñ‚ÑŒ</button>
Â  Â  <button onclick="resetGame()">Ğ¡Ğ±Ñ€Ğ¾Ñ</button>
</div>

</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let W,H;

function resize(){
Â  Â  W = canvas.clientWidth;
Â  Â  H = canvas.clientHeight;
Â  Â  canvas.width = W;
Â  Â  canvas.height = H;
}
window.addEventListener("resize", resize);
resize();

/* ---------- Ğ“Ğ•ĞĞœĞ•Ğ¢Ğ Ğ˜Ğ¯ ---------- */

const SAFE_BOTTOM = 90; Â  Â  Â // Ğ¾Ñ‚ÑÑ‚ÑƒĞ¿ Ğ¿Ğ¾Ğ´ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ
const GROUND_H = 60;

function groundY(){
Â  Â  return H - GROUND_H - SAFE_BOTTOM;
}

/* ---------- Ğ˜Ğ“Ğ ĞĞš ---------- */

const playerImg = new Image();
playerImg.src = "archer.png";

const PLAYER_W = 70;
const PLAYER_H = 70;

let player = {
Â  Â  x: 80,
Â  Â  y: groundY() - PLAYER_H,
Â  Â  vy: 0,
Â  Â  jumping:false
};

function jump(){
Â  Â  if(!player.jumping){
Â  Â  Â  Â  player.vy = -14;
Â  Â  Â  Â  player.jumping = true;
Â  Â  }
}

/* ---------- ĞŸĞ Ğ•ĞŸĞ¯Ğ¢Ğ¡Ğ¢Ğ’Ğ˜Ğ¯ ---------- */

let obstacles = [];
let speed = 6;
let distance = 0;
let running = false;

function spawnObstacle(){
Â  Â  obstacles.push({
Â  Â  Â  Â  x: W,
Â  Â  Â  Â  w: 30,
Â  Â  Â  Â  h: 50
Â  Â  });
}

setInterval(()=>{
Â  Â  if(running){
Â  Â  Â  Â  spawnObstacle();
Â  Â  }
},1500);

/* ---------- Ğ˜Ğ“Ğ ĞĞ’ĞĞ™ Ğ¦Ğ˜ĞšĞ› ---------- */

function update(){
Â  Â  if(!running) return;

Â  Â  ctx.clearRect(0,0,W,H);

Â  Â  // Ğ³Ñ€Ğ°Ğ²Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ
Â  Â  player.vy += 0.8;
Â  Â  player.y += player.vy;

Â  Â  if(player.y >= groundY() - PLAYER_H){
Â  Â  Â  Â  player.y = groundY() - PLAYER_H;
Â  Â  Â  Â  player.vy = 0;
Â  Â  Â  Â  player.jumping = false;
Â  Â  }

Â  Â  // Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€ĞµĞ¿ÑÑ‚ÑÑ‚Ğ²Ğ¸Ğ¹
Â  Â  obstacles.forEach(o=> o.x -= speed);

Â  Â  obstacles = obstacles.filter(o=> o.x + o.w > 0);

Â  Â  distance += 1;

Â  Â  draw();

Â  Â  requestAnimationFrame(update);
}

function draw(){

Â  Â  // Ñ„Ğ¾Ğ½
Â  Â  ctx.fillStyle = "#0b1224";
Â  Â  ctx.fillRect(0,0,W,H);

Â  Â  // Ğ·ĞµĞ¼Ğ»Ñ
Â  Â  ctx.fillStyle = "#1e293b";
Â  Â  ctx.fillRect(0, groundY(), W, GROUND_H);

Â  Â  // Ğ¸Ğ³Ñ€Ğ¾Ğº
Â  Â  ctx.drawImage(
Â  Â  Â  Â  playerImg,
Â  Â  Â  Â  0,0,playerImg.width,playerImg.height,
Â  Â  Â  Â  player.x,
Â  Â  Â  Â  player.y,
Â  Â  Â  Â  PLAYER_W,
Â  Â  Â  Â  PLAYER_H
Â  Â  );

Â  Â  // Ğ¿Ñ€ĞµĞ¿ÑÑ‚ÑÑ‚Ğ²Ğ¸Ñ
Â  Â  ctx.fillStyle = "crimson";
Â  Â  obstacles.forEach(o=>{
Â  Â  Â  Â  ctx.fillRect(o.x, groundY() - o.h, o.w, o.h);
Â  Â  });

Â  Â  // Ğ´Ğ¸ÑÑ‚Ğ°Ğ½Ñ†Ğ¸Ñ
Â  Â  ctx.fillStyle = "white";
Â  Â  ctx.font = "16px Arial";
Â  Â  ctx.fillText("Ğ”Ğ¸ÑÑ‚Ğ°Ğ½Ñ†Ğ¸Ñ: "+distance+" Ğ¼", 20, 30);
}

/* ---------- ĞšĞĞĞŸĞšĞ˜ ---------- */

function startGame(){
Â  Â  running = true;
Â  Â  update();
}

function resetGame(){
Â  Â  obstacles = [];
Â  Â  distance = 0;
Â  Â  player.y = groundY() - PLAYER_H;
}

/* ---------- Ğ¢ĞĞŸ ---------- */

canvas.addEventListener("touchstart", jump);
canvas.addEventListener("mousedown", jump);
</script>

</body>
</html>
