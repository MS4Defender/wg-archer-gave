<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WG Archer Run</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body {
Â  Â  margin: 0;
Â  Â  background: #111;
Â  Â  color: white;
Â  Â  font-family: Arial;
Â  Â  text-align: center;
}

#game {
Â  Â  position: relative;
Â  Â  width: 100%;
Â  Â  height: 300px;
Â  Â  background: #222;
Â  Â  overflow: hidden;
Â  Â  border-top: 3px solid #444;
Â  Â  border-bottom: 3px solid #444;
Â  Â  margin-top: 20px;
}

#player {
Â  Â  position: absolute;
Â  Â  bottom: 0;
Â  Â  left: 50px;
Â  Â  width: 40px;
Â  Â  height: 40px;
Â  Â  background: red;
}

.obstacle {
Â  Â  position: absolute;
Â  Â  bottom: 0;
Â  Â  width: 30px;
Â  Â  height: 40px;
Â  Â  background: lime;
}

button {
Â  Â  padding: 10px 20px;
Â  Â  font-size: 16px;
Â  Â  margin-top: 20px;
}
</style>
</head>
<body>

<h2>ğŸ¹ WG Archer Run</h2>

<div>
â± Ğ’Ñ€ĞµĞ¼Ñ: <span id="time">0</span> ÑĞµĞº<br>
ğŸ Ğ”Ğ¸ÑÑ‚Ğ°Ğ½Ñ†Ğ¸Ñ: <span id="distance">0</span> Ğ¼<br>
âš¡ Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ: <span id="speed">1.0</span>x
</div>

<button onclick="startGame()">â–¶ Ğ˜Ğ³Ñ€Ğ°Ñ‚ÑŒ</button>

<div id="game">
Â  Â  <div id="player"></div>
</div>

<p>Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ: Ğ¿Ñ€Ğ¾Ğ±ĞµĞ» / Ñ‚Ğ°Ğ¿ Ğ¿Ğ¾ ÑĞºÑ€Ğ°Ğ½Ñƒ</p>

<script>
let player = document.getElementById("player");
let game = document.getElementById("game");

let jumping = false;
let velocity = 0;
let gravity = 0.6;

let gameRunning = false;
let speed = 5;
let distance = 0;
let time = 0;

function jump() {
Â  Â  if (!jumping) {
Â  Â  Â  Â  velocity = 12;
Â  Â  Â  Â  jumping = true;
Â  Â  }
}

document.addEventListener("keydown", e => {
Â  Â  if (e.code === "Space") jump();
});

document.addEventListener("click", () => {
Â  Â  if (gameRunning) jump();
});

function startGame() {
Â  Â  if (gameRunning) return;

Â  Â  gameRunning = true;
Â  Â  distance = 0;
Â  Â  time = 0;
Â  Â  speed = 5;

Â  Â  document.getElementById("distance").textContent = 0;
Â  Â  document.getElementById("time").textContent = 0;
Â  Â  document.getElementById("speed").textContent = "1.0";

Â  Â  spawnObstacle();
Â  Â  requestAnimationFrame(update);
}

function spawnObstacle() {
Â  Â  let obs = document.createElement("div");
Â  Â  obs.classList.add("obstacle");
Â  Â  obs.style.left = "100%";
Â  Â  game.appendChild(obs);

Â  Â  let move = setInterval(() => {
Â  Â  Â  Â  if (!gameRunning) {
Â  Â  Â  Â  Â  Â  clearInterval(move);
Â  Â  Â  Â  Â  Â  obs.remove();
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  let left = parseInt(obs.style.left);
Â  Â  Â  Â  obs.style.left = (left - speed) + "px";

Â  Â  Â  Â  if (left < -30) {
Â  Â  Â  Â  Â  Â  obs.remove();
Â  Â  Â  Â  Â  Â  clearInterval(move);
Â  Â  Â  Â  }

Â  Â  Â  Â  let playerRect = player.getBoundingClientRect();
Â  Â  Â  Â  let obsRect = obs.getBoundingClientRect();

Â  Â  Â  Â  if (
Â  Â  Â  Â  Â  Â  playerRect.right > obsRect.left &&
Â  Â  Â  Â  Â  Â  playerRect.left < obsRect.right &&
Â  Â  Â  Â  Â  Â  playerRect.bottom > obsRect.top
Â  Â  Â  Â  ) {
Â  Â  Â  Â  Â  Â  alert("Ğ¢Ñ‹ Ğ¿Ñ€Ğ¾Ğ¸Ğ³Ñ€Ğ°Ğ»!");
Â  Â  Â  Â  Â  Â  location.reload();
Â  Â  Â  Â  }

Â  Â  }, 20);

Â  Â  setTimeout(spawnObstacle, 2000);
}

function update() {
Â  Â  if (!gameRunning) return;

Â  Â  velocity -= gravity;
Â  Â  let bottom = parseInt(player.style.bottom || 0);
Â  Â  bottom += velocity;

Â  Â  if (bottom <= 0) {
Â  Â  Â  Â  bottom = 0;
Â  Â  Â  Â  jumping = false;
Â  Â  }

Â  Â  player.style.bottom = bottom + "px";

Â  Â  distance += speed * 0.1;
Â  Â  time += 0.016;

Â  Â  document.getElementById("distance").textContent = Math.floor(distance);
Â  Â  document.getElementById("time").textContent = time.toFixed(1);
Â  Â  document.getElementById("speed").textContent = (speed / 5).toFixed(1);

Â  Â  requestAnimationFrame(update);
}
</script>

</body>
</html>
