<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WG Archer Run</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
html, body{
Â  Â  margin:0;
Â  Â  padding:0;
Â  Â  background:#0f0f12;
Â  Â  color:#fff;
Â  Â  font-family:Arial, sans-serif;
Â  Â  height:100%;
Â  Â  overflow:hidden;
}

.wrap{
Â  Â  height:100vh;
Â  Â  box-sizing:border-box;
Â  Â  padding:12px;
Â  Â  display:flex;
Â  Â  flex-direction:column;
Â  Â  gap:10px;
}

h1{
Â  Â  margin:0;
Â  Â  font-size:22px;
}

.stats{
Â  Â  font-size:14px;
Â  Â  line-height:1.6;
}

canvas{
Â  Â  width:100%;
Â  Â  height:50vh;
Â  Â  min-height:260px;
Â  Â  max-height:420px;
Â  Â  background:#1a1a22;
Â  Â  border-radius:12px;
Â  Â  display:block;
}

button{
Â  Â  padding:10px 18px;
Â  Â  border:none;
Â  Â  border-radius:8px;
Â  Â  font-size:14px;
Â  Â  cursor:pointer;
}

.play-btn{
Â  Â  background:#4da6ff;
Â  Â  color:#000;
Â  Â  font-weight:bold;
}

.hint{
Â  Â  font-size:13px;
Â  Â  opacity:0.7;
}
</style>
</head>

<body>
<div class="wrap">

<h1>ğŸ¹ WG Archer Run</h1>

<div class="stats">
â± Ğ’Ñ€ĞµĞ¼Ñ: <span id="time">0.0</span> ÑĞµĞº<br>
ğŸ Ğ”Ğ¸ÑÑ‚Ğ°Ğ½Ñ†Ğ¸Ñ: <span id="distance">0</span> Ğ¼<br>
âš¡ Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ: <span id="speed">1.0</span>x
</div>

<canvas id="game"></canvas>

<button class="play-btn" id="playBtn">â–¶ Ğ˜Ğ³Ñ€Ğ°Ñ‚ÑŒ</button>

<div class="hint">
ĞŸÑ€Ğ¾Ğ±ĞµĞ» / Ñ‚Ğ°Ğ¿ Ğ¿Ğ¾ ÑĞºÑ€Ğ°Ğ½Ñƒ â€” Ğ¿Ñ€Ñ‹Ğ¶Ğ¾Ğº.
</div>

</div>

<script>
if (window.Telegram && Telegram.WebApp) {
Â  Â  Telegram.WebApp.ready();
Â  Â  Telegram.WebApp.expand();
}

const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resizeCanvas(){
Â  Â  canvas.width = canvas.clientWidth;
Â  Â  canvas.height = canvas.clientHeight;
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

let player = {
Â  Â  x:50,
Â  Â  y:0,
Â  Â  width:30,
Â  Â  height:30,
Â  Â  velocity:0,
Â  Â  jumping:false
};

let gravity = 0.6;
let obstacles = [];
let gameRunning = false;
let startTime = 0;
let speed = 4;

function resetGame(){
Â  Â  player.y = canvas.height - player.height - 20;
Â  Â  player.velocity = 0;
Â  Â  player.jumping = false;
Â  Â  obstacles = [];
Â  Â  speed = 4;
Â  Â  document.getElementById("time").textContent = "0.0";
Â  Â  document.getElementById("distance").textContent = "0";
Â  Â  document.getElementById("speed").textContent = "1.0";
}

function spawnObstacle(){
Â  Â  obstacles.push({
Â  Â  Â  Â  x: canvas.width,
Â  Â  Â  Â  y: canvas.height - 40,
Â  Â  Â  Â  width:20,
Â  Â  Â  Â  height:40
Â  Â  });
}

function update(){
Â  Â  if(!gameRunning) return;

Â  Â  ctx.clearRect(0,0,canvas.width,canvas.height);

Â  Â  // Ğ·ĞµĞ¼Ğ»Ñ
Â  Â  ctx.fillStyle="#333";
Â  Â  ctx.fillRect(0, canvas.height-20, canvas.width, 20);

Â  Â  // Ğ¸Ğ³Ñ€Ğ¾Ğº
Â  Â  ctx.fillStyle="#ffffff";
Â  Â  ctx.fillRect(player.x, player.y, player.width, player.height);

Â  Â  // Ñ„Ğ¸Ğ·Ğ¸ĞºĞ°
Â  Â  player.velocity += gravity;
Â  Â  player.y += player.velocity;

Â  Â  if(player.y >= canvas.height - player.height - 20){
Â  Â  Â  Â  player.y = canvas.height - player.height - 20;
Â  Â  Â  Â  player.jumping = false;
Â  Â  }

Â  Â  // Ğ¿Ñ€ĞµĞ¿ÑÑ‚ÑÑ‚Ğ²Ğ¸Ñ
Â  Â  ctx.fillStyle="#ff4d4d";
Â  Â  for(let i=0;i<obstacles.length;i++){
Â  Â  Â  Â  let obs = obstacles[i];
Â  Â  Â  Â  obs.x -= speed;
Â  Â  Â  Â  ctx.fillRect(obs.x, obs.y, obs.width, obs.height);

Â  Â  Â  Â  // ÑÑ‚Ğ¾Ğ»ĞºĞ½Ğ¾Ğ²ĞµĞ½Ğ¸Ğµ
Â  Â  Â  Â  if(player.x < obs.x + obs.width &&
Â  Â  Â  Â  Â  Â player.x + player.width > obs.x &&
Â  Â  Â  Â  Â  Â player.y < obs.y + obs.height &&
Â  Â  Â  Â  Â  Â player.y + player.height > obs.y){
Â  Â  Â  Â  Â  Â  Â  Â gameRunning = false;
Â  Â  Â  Â  Â  Â  Â  Â alert("Ğ¢Ñ‹ Ğ¿Ñ€Ğ¾Ğ¸Ğ³Ñ€Ğ°Ğ»!");
Â  Â  Â  Â  Â  Â  Â  Â resetGame();
Â  Â  Â  Â  }
Â  Â  }

Â  Â  obstacles = obstacles.filter(o => o.x > -50);

Â  Â  if(Math.random() < 0.02){
Â  Â  Â  Â  spawnObstacle();
Â  Â  }

Â  Â  let time = (Date.now() - startTime) / 1000;
Â  Â  document.getElementById("time").textContent = time.toFixed(1);
Â  Â  document.getElementById("distance").textContent = Math.floor(time * 25);
Â  Â  document.getElementById("speed").textContent = (speed/4).toFixed(1);

Â  Â  speed += 0.001;

Â  Â  requestAnimationFrame(update);
}

function jump(){
Â  Â  if(!player.jumping){
Â  Â  Â  Â  player.velocity = -12;
Â  Â  Â  Â  player.jumping = true;
Â  Â  }
}

document.addEventListener("keydown", e=>{
Â  Â  if(e.code === "Space") jump();
});

canvas.addEventListener("click", jump);
canvas.addEventListener("touchstart", jump);

document.getElementById("playBtn").addEventListener("click", ()=>{
Â  Â  resetGame();
Â  Â  gameRunning = true;
Â  Â  startTime = Date.now();
Â  Â  update();
});

resetGame();
</script>

</body>
</html>
