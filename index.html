<!doctype html>
<html lang="ru">
<head>
Â  <meta charset="utf-8"/>
Â  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
Â  <title>WG Archer Run</title>
Â  <script src="https://telegram.org/js/telegram-web-app.js"></script>

Â  <style>
Â  Â  html, body { margin:0; padding:0; background:#0f0f12; color:#fff; font-family: Arial, sans-serif; }
Â  Â  .wrap { padding:16px; }
Â  Â  h2 { margin: 0 0 10px 0; }
Â  Â  .stats { opacity:.95; line-height: 1.6; margin-bottom: 12px; }
Â  Â  button { padding:10px 18px; font-size:16px; border-radius:10px; border:0; cursor:pointer; }
Â  Â  .hint { opacity:.75; margin-top: 10px; }

Â  Â  /* Ğ’ĞĞ–ĞĞ: Ğ¿Ğ¾Ğ»Ğµ Ğ¸Ğ³Ñ€Ñ‹ Ğ´ĞµĞ»Ğ°ĞµĞ¼ Ğ¯Ğ’ĞĞ Ğ’Ğ˜Ğ”Ğ˜ĞœĞ«Ğœ */
Â  Â  .gameBox{
Â  Â  Â  margin-top: 14px;
Â  Â  Â  border: 3px solid #ffffff; Â  Â  /* Ğ‘ĞµĞ»Ğ°Ñ Ñ€Ğ°Ğ¼ĞºĞ° â€” Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ ÑƒĞ²Ğ¸Ğ´Ğ¸ÑˆÑŒ */
Â  Â  Â  border-radius: 12px;
Â  Â  Â  background: #1b1b22; Â  Â  Â  Â  Â  /* ĞšĞ¾Ğ½Ñ‚Ñ€Ğ°ÑÑ‚Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ğ½ */
Â  Â  Â  overflow:hidden;
Â  Â  }

Â  Â  canvas{
Â  Â  Â  display:block;
Â  Â  Â  width:100%;
Â  Â  Â  height:320px; Â  Â  Â  Â  Â  Â  Â  Â  /* Ğ’Ğ¸Ğ´Ğ¸Ğ¼Ğ°Ñ Ğ²Ñ‹ÑĞ¾Ñ‚Ğ° */
Â  Â  Â  touch-action: manipulation;
Â  Â  }
Â  </style>
</head>

<body>
Â  <div class="wrap">
Â  Â  <h2>ğŸ¹ WG Archer Run</h2>

Â  Â  <div class="stats">
Â  Â  Â  â± Ğ’Ñ€ĞµĞ¼Ñ: <b id="t">0.0</b> ÑĞµĞº<br>
Â  Â  Â  ğŸ Ğ”Ğ¸ÑÑ‚Ğ°Ğ½Ñ†Ğ¸Ñ: <b id="d">0</b> Ğ¼<br>
Â  Â  Â  âš¡ Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ: <b id="s">1.0</b>x
Â  Â  </div>

Â  Â  <button id="btn">â–¶ Ğ˜Ğ³Ñ€Ğ°Ñ‚ÑŒ</button>

Â  Â  <div class="gameBox">
Â  Â  Â  <canvas id="cv"></canvas>
Â  Â  </div>

Â  Â  <div class="hint">Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ: Ñ‚Ğ°Ğ¿ Ğ¿Ğ¾ ÑĞºÑ€Ğ°Ğ½Ñƒ / Ğ¿Ñ€Ğ¾Ğ±ĞµĞ» â€” Ğ¿Ñ€Ñ‹Ğ¶Ğ¾Ğº</div>
Â  </div>

<script>
(() => {
Â  const cv = document.getElementById("cv");
Â  const ctx = cv.getContext("2d");

Â  const tEl = document.getElementById("t");
Â  const dEl = document.getElementById("d");
Â  const sEl = document.getElementById("s");
Â  const btn = document.getElementById("btn");

Â  // ĞŸĞ¾Ğ´Ğ³Ğ¾Ğ½ÑĞµĞ¼ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ canvas Ğ¿Ğ¾Ğ´ ÑĞºÑ€Ğ°Ğ½ (Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ĞĞ• Ğ±Ñ‹Ğ»Ğ¾ â€œĞ¿ÑƒÑÑ‚Ğ¾â€)
Â  function resizeCanvas(){
Â  Â  const rect = cv.getBoundingClientRect();
Â  Â  const dpr = window.devicePixelRatio || 1;
Â  Â  cv.width Â = Math.floor(rect.width Â * dpr);
Â  Â  cv.height = Math.floor(rect.height * dpr);
Â  Â  ctx.setTransform(dpr,0,0,dpr,0,0); // Ñ€Ğ¸ÑÑƒĞµĞ¼ Ğ² CSS-Ğ¿Ğ¸ĞºÑĞµĞ»ÑÑ…
Â  }
Â  window.addEventListener("resize", resizeCanvas);
Â  resizeCanvas();

Â  // Ğ˜Ğ³Ñ€Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹
Â  let running = false;
Â  let last = 0;

Â  let time = 0;
Â  let dist = 0;
Â  let speed = 220; // px/sec (Ğ±Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ)
Â  let speedMult = 1.0;

Â  // Ğ˜Ğ³Ñ€Ğ¾Ğº (ĞºĞ²Ğ°Ğ´Ñ€Ğ°Ñ‚)
Â  const player = { x: 60, y: 0, w: 34, h: 34, vy: 0, onGround: true };
Â  const groundY = 320 - 40; // Ğ·ĞµĞ¼Ğ»Ñ (Ğ² CSS px Ğ¾Ñ‚Ğ½Ğ¾ÑĞ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ²Ñ‹ÑĞ¾Ñ‚Ñ‹ canvas)
Â  function canvasH(){ return 320; } // Ğ²Ñ‹ÑĞ¾Ñ‚Ğ° Ğ² CSS px

Â  // ĞŸÑ€ĞµĞ¿ÑÑ‚ÑÑ‚Ğ²Ğ¸Ñ
Â  let obstacles = [];
Â  let spawnTimer = 0;

Â  function reset(){
Â  Â  time = 0; dist = 0; speedMult = 1.0;
Â  Â  player.y = groundY - player.h;
Â  Â  player.vy = 0;
Â  Â  player.onGround = true;
Â  Â  obstacles = [];
Â  Â  spawnTimer = 0;
Â  Â  tEl.textContent = "0.0";
Â  Â  dEl.textContent = "0";
Â  Â  sEl.textContent = "1.0";
Â  }

Â  function jump(){
Â  Â  if (!running) return;
Â  Â  if (player.onGround){
Â  Â  Â  player.vy = -520; // ÑĞ¸Ğ»Ğ° Ğ¿Ñ€Ñ‹Ğ¶ĞºĞ°
Â  Â  Â  player.onGround = false;
Â  Â  }
Â  }

Â  // Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ
Â  document.addEventListener("keydown", e => { if (e.code==="Space") jump(); });
Â  cv.addEventListener("pointerdown", () => jump());
Â  document.addEventListener("click", (e) => {
Â  Â  // ĞµÑĞ»Ğ¸ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº ĞºĞ»Ğ¸ĞºĞ°ĞµÑ‚ Ğ¿Ğ¾ ĞºĞ½Ğ¾Ğ¿ĞºĞµ/Ğ¾ĞºĞ½Ñƒ â€” Ğ¿Ñ€Ñ‹Ğ¶Ğ¾Ğº Ğ½Ğµ Ğ¼ĞµÑˆĞ°ĞµÑ‚
Â  });

Â  function spawnObstacle(){
Â  Â  // Ñ€Ğ°Ğ·Ğ½Ğ°Ñ Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°/ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ° Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ½Ğ¾Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¸Ñ
Â  Â  const w = 26 + Math.random()*18;
Â  Â  const h = 30 + Math.random()*28;
Â  Â  obstacles.push({ x: cv.getBoundingClientRect().width + 20, y: groundY - h, w, h });
Â  }

Â  function collide(a,b){
Â  Â  return a.x < b.x + b.w && a.x + a.w > b.x && a.y < b.y + b.h && a.y + a.h > b.y;
Â  }

Â  function gameOver(){
Â  Â  running = false;
Â  Â  btn.textContent = "â–¶ Ğ˜Ğ³Ñ€Ğ°Ñ‚ÑŒ";
Â  Â  // Ğ§Ñ‚Ğ¾Ğ±Ñ‹ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ ÑƒĞ²Ğ¸Ğ´ĞµÑ‚ÑŒ, Ñ‡Ñ‚Ğ¾ Ğ¸Ğ³Ñ€Ğ° â€œĞµÑÑ‚ÑŒâ€, Ñ€Ğ¸ÑÑƒĞµĞ¼ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ Ñ‚ĞµĞºÑÑ‚:
Â  Â  ctx.fillStyle = "rgba(0,0,0,.55)";
Â  Â  ctx.fillRect(0,0,cv.getBoundingClientRect().width,canvasH());
Â  Â  ctx.fillStyle = "#fff";
Â  Â  ctx.font = "bold 22px Arial";
Â  Â  ctx.fillText("Ğ¢Ñ‹ Ğ¿Ñ€Ğ¾Ğ¸Ğ³Ñ€Ğ°Ğ»! ĞĞ°Ğ¶Ğ¼Ğ¸ Ğ˜Ğ³Ñ€Ğ°Ñ‚ÑŒ", 18, 70);
Â  }

Â  function draw(){
Â  Â  const W = cv.getBoundingClientRect().width;
Â  Â  const H = canvasH();

Â  Â  // Ñ„Ğ¾Ğ½
Â  Â  ctx.fillStyle = "#1b1b22";
Â  Â  ctx.fillRect(0,0,W,H);

Â  Â  // Ğ·ĞµĞ¼Ğ»Ñ
Â  Â  ctx.fillStyle = "#2e2e3a";
Â  Â  ctx.fillRect(0, groundY, W, H-groundY);

Â  Â  // Ğ¸Ğ³Ñ€Ğ¾Ğº (Ğ‘Ğ•Ğ›Ğ«Ğ™ â€” Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ±Ñ‹Ğ»Ğ¾ Ğ²Ğ¸Ğ´Ğ½Ğ¾)
Â  Â  ctx.fillStyle = "#ffffff";
Â  Â  ctx.fillRect(player.x, player.y, player.w, player.h);

Â  Â  // Ğ¿Ñ€ĞµĞ¿ÑÑ‚ÑÑ‚Ğ²Ğ¸Ñ (Ğ¯Ğ ĞšĞ-Ğ–ĞĞ›Ğ¢Ğ«Ğ•)
Â  Â  ctx.fillStyle = "#ffd400";
Â  Â  for (const o of obstacles){
Â  Â  Â  ctx.fillRect(o.x, o.y, o.w, o.h);
Â  Â  }

Â  Â  // Ğ¼Ğ°Ğ»ĞµĞ½ÑŒĞºĞ°Ñ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑÑŒ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‡Ñ‚Ğ¾ canvas Ğ¶Ğ¸Ğ²Ğ¾Ğ¹
Â  Â  ctx.fillStyle = "rgba(255,255,255,.35)";
Â  Â  ctx.font = "12px Arial";
Â  Â  ctx.fillText("Canvas OK", 10, 16);
Â  }

Â  function tick(ts){
Â  Â  if (!running) return;
Â  Â  if (!last) last = ts;
Â  Â  const dt = Math.min(0.033, (ts-last)/1000); // Ğ¼Ğ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 33Ğ¼Ñ
Â  Â  last = ts;

Â  Â  const W = cv.getBoundingClientRect().width;

Â  Â  // Ğ²Ñ€ĞµĞ¼Ñ/Ğ´Ğ¸ÑÑ‚Ğ°Ğ½Ñ†Ğ¸Ñ/ÑƒÑĞºĞ¾Ñ€ĞµĞ½Ğ¸Ğµ
Â  Â  time += dt;
Â  Â  speedMult = 1.0 + Math.min(2.5, time/60); // Ñ€Ğ°ÑÑ‚Ñ‘Ñ‚ Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ğ¾
Â  Â  dist += (speed*speedMult) * dt * 0.10; Â  Â // Ğ² Ğ¼ĞµÑ‚Ñ€Ñ‹ â€œÑƒÑĞ»Ğ¾Ğ²Ğ½Ğ¾â€

Â  Â  tEl.textContent = time.toFixed(1);
Â  Â  dEl.textContent = Math.floor(dist);
Â  Â  sEl.textContent = speedMult.toFixed(1);

Â  Â  // Ñ„Ğ¸Ğ·Ğ¸ĞºĞ° Ğ¿Ñ€Ñ‹Ğ¶ĞºĞ°
Â  Â  player.vy += 1400 * dt; // Ğ³Ñ€Ğ°Ğ²Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ
Â  Â  player.y += player.vy * dt;

Â  Â  if (player.y >= groundY - player.h){
Â  Â  Â  player.y = groundY - player.h;
Â  Â  Â  player.vy = 0;
Â  Â  Â  player.onGround = true;
Â  Â  }

Â  Â  // ÑĞ¿Ğ°Ğ²Ğ½ Ğ¿Ñ€ĞµĞ¿ÑÑ‚ÑÑ‚Ğ²Ğ¸Ğ¹
Â  Â  spawnTimer -= dt;
Â  Â  if (spawnTimer <= 0){
Â  Â  Â  spawnObstacle();
Â  Â  Â  spawnTimer = 1.2 + Math.random()*0.9; // 1.2â€“2.1 ÑĞµĞº
Â  Â  }

Â  Â  // Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€ĞµĞ¿ÑÑ‚ÑÑ‚Ğ²Ğ¸Ğ¹ + ĞºĞ¾Ğ»Ğ»Ğ¸Ğ·Ğ¸Ğ¸
Â  Â  for (const o of obstacles){
Â  Â  Â  o.x -= (speed*speedMult) * dt;
Â  Â  Â  if (collide(player, o)){
Â  Â  Â  Â  gameOver();
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  }
Â  Â  obstacles = obstacles.filter(o => o.x + o.w > -50);

Â  Â  draw();
Â  Â  requestAnimationFrame(tick);
Â  }

Â  btn.addEventListener("click", () => {
Â  Â  if (!running){
Â  Â  Â  resizeCanvas(); // ĞµÑ‰Ñ‘ Ñ€Ğ°Ğ· Ğ½Ğ° Ğ²ÑÑĞºĞ¸Ğ¹ ÑĞ»ÑƒÑ‡Ğ°Ğ¹
Â  Â  Â  reset();
Â  Â  Â  running = true;
Â  Â  Â  last = 0;
Â  Â  Â  btn.textContent = "â¹ Ğ˜Ğ´Ñ‘Ñ‚ Ğ¸Ğ³Ñ€Ğ°";
Â  Â  Â  draw();
Â  Â  Â  requestAnimationFrame(tick);
Â  Â  }
Â  });

Â  // ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ ĞºĞ°Ğ´Ñ€ â€” Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ÑÑ€Ğ°Ğ·Ñƒ Ğ±Ñ‹Ğ»Ğ¾ Ğ²Ğ¸Ğ´Ğ½Ğ¾ Ñ€Ğ°Ğ¼ĞºÑƒ Ğ¸ Ğ¿Ğ¾Ğ»Ğµ
Â  reset();
Â  draw();

})();
</script>
</body>
</html>
